## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!

–ú–æ–π –ª—é–±–∏–º—ã–π –ø—Ä–µ–¥–º–µ—Ç 7 —Å–µ–º–µ—Å—Ç—Ä–∞, –Ω–æ —Å–∫–æ—Ä–µ–µ –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—É—Ç –±—ã–ª–æ –º–Ω–æ–≥–æ –¥–µ–≤–æ–ø—Å–µ—Ä—Å–∫–∏—Ö –ø—Ä–∏–∫–æ–ª–æ–≤. –í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç —É –º–µ–Ω—è –±—ã–ª —Ç—Ä–æ–π–Ω–æ–π dind, –∏–±–æ —è –Ω–µ —Ö–æ—Ç–µ–ª–∞ –¥–µ–ª–∞—Ç—å shell-—Ä–∞–Ω–Ω–µ—Ä, –Ω–æ –∫ 4 –ª–∞–±–µ –ø—Ä–∏—à–ª–æ—Å—å.


–Ø –±—Ä–∞–ª–∞ –ø—Ä–æ–µ–∫—Ç —Å –∫—É—Ä—Å–∞ –ø–æ –ü–ü–û 5 —Å–µ–º–µ—Å—Ç—Ä–∞ –Ω–∞ Go, –±–¥ Postgres, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π üíÖ
–ù–∞ –∫–∞–∂–¥—É—é –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞, –ª—É—á—à–µ —Ç–∞–∫ –∏ —Å–¥–∞–≤–∞—Ç—å. –¢–æ–ª—å–∫–æ —É –º–µ–Ω—è –≤—Ä–æ–¥–µ –±—ã–ª –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏–∫–æ–ª —Å –≤–µ—Ç–∫–∞–º–∏ –¥–ª—è –ø–µ—Ä–≤—ã—Ö –¥–≤—É—Ö –ª–∞–±, –∞ —Ç–æ—á–Ω–µ–µ –∏–∑-–∑–∞ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞, –Ω–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ (–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —ç—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞ –Ω–µ—Ç –≤ main). –Ø —Å–¥–∞–≤–∞–ª–∞ –≤—Å–µ –æ–¥–Ω–æ–π –∏–∑ –ø–µ—Ä–≤–æ–π, –∞ –≤—ã —Å–∞–º–∏ –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ª–æ—è–ª—å–Ω–æ—Å—Ç—å + –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —É—Ö–æ–¥–∏–ª–æ –Ω–∞ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ dind.



##### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [.gitlab-ci.yml](https://github.com/Dashori/bmstu-testing/blob/main/.gitlab-ci.yml).


#### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã
1. Unit —Ç–µ—Å—Ç—ã –≤ internal/services. –¢–∞–º –±—ã–ª–æ —É—Å–ª–æ–≤–∏–µ –ø—Ä–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∏ –õ–æ–Ω–¥–æ–Ω—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç. –£ –º–µ–Ω—è –≤—Å–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –µ—â–µ –Ω–∞ –∫—É—Ä—Å–µ, –∫—Ä–æ–º–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∞. –ï–≥–æ —è –¥–µ–ª–∞–ª–∞ –≤ –º–æ–º–µ–Ω—Ç–µ –∏ —Å–µ–π—á–∞—Å —è –µ–≥–æ –Ω–∞—Ö–æ–∂—É —Ç–æ–ª—å–∫–æ –≤ [–∫–æ–º–º–∏—Ç–µ](https://github.com/Dashori/bmstu-testing/commit/add3e6abb2231b2c384a9ba72ec1470074004523#diff-670949da573334494a923566f54ce892c39fd4ed04f885bcae07c509bffdf14aR231). –ò –∫–∞–∂–µ—Ç—Å—è –æ–Ω –µ—â–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Ö—Ö–∞—Ö–∞... –° allure —Ç–∞–º —Ç–æ–∂–µ –∫–∞–∫–∞—è-—Ç–æ —Å–∞–º–æ–¥–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ—Ç —Ä–µ–±—è—Ç —Å –ø–æ—Ç–æ–∫–∞. –í [.gitlab-ci.yml](https://github.com/Dashori/bmstu-testing/blob/main/.gitlab-ci.yml) –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞.


2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –±—ã–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –∫—É—Ä—Å–µ —Ä–∞–Ω–µ–µ, —Ç–∞–º –≤—Ä–æ–¥–µ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º, –≤—Å–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ internal/repository –ü–æ–¥ E2E —Ç–µ—Å—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–æ—á–∫–∞, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å docker-compose.yml –∏ –ø–æ—Ç–æ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —Ç–µ—Å—Ç. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –ø–∞—Ä—É –ø—Ä–∏—Å–µ–¥–∞–Ω–∏–π, –≤–µ—Ä–æ—è—Ç–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –∞–¥—Ä–µ—Å –Ω–∞ localhost –≤ –∫–æ–Ω—Ñ–∏–≥–µ. –î–ª—è –∑–∞—Ö–≤–∞—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ —è –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–ª–∞ tcpdump –∏ –æ—Ç–∫—Ä—ã–ª–∞ –≤ Wireshark.


3. –¢—É—Ç –≤—Ä–æ–¥–µ –≤—Å–µ –Ω–æ—Ä–º, –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π [docker-compose-bemch.yml](https://github.com/Dashori/bmstu-testing/blob/main/docker-compose-bench.yaml) —Å–æ —Å–±–æ—Ä–æ–º –º–µ—Ç—Ä–∏–∫ —Å –ø–æ–º–æ—â—å—é Prometheus –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π –≤ Grafana. –Ø –µ—â–µ –Ω–∞—à–ª–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫–µ—Ä—Ñ–∞–π–ª –¥–ª—è —ç—Ç–æ–≥–æ, –Ω–µ –ø–æ–º–Ω—é –∫–∞–∫ –≤ –∏—Ç–æ–≥–µ —Å–¥–∞–≤–∞–ª–∞, –Ω–æ –¥—É–º–∞—é —Ç–∞–º –Ω–µ—Å–ª–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è.


4. –ú–æ—è –ª—é–±–∏–º–∞—è –ª–∞–±–∞! –°–¥–µ–ª–∞–ª–∞ 2FA —Å –ø–æ–º–æ—â—å—é –ø–æ—á—Ç—ã, –ª–∏—á–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–∞–∫ –í–æ–≤—ã, —Å–ø–∞—Å–∏–±–æ –µ–º—É. –°–æ–∑–¥–∞–ª –º–Ω–µ –¥–≤–µ –∫—Ä–∏–Ω–∂–æ–≤—ã–µ –ø–æ—á—Ç—ã dashylya@huds.su –∏ dashori@huds.su, –æ–¥–Ω–∞ —Ç–∞–∫ —Å–∫–∞–∑–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω–∞—è –∏ —Å –Ω–µ–µ —è –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∞ –∫–æ–¥—ã, –∞ –¥—Ä—É–≥–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–ª—è —Ç–µ—Å—Ç–∞. –õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∞ —Å–ª–µ–¥—É—é—â–∞—è: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å –ø–æ—á—Ç–æ–π => –Ω–∞ —ç—Ç—É –ø–æ—á—Ç—É –≤—ã—Å—ã–ª–∞–µ—Ç—Å—è OTP –∫–æ–¥ (–Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ [—Ö—ç—à](https://github.com/Dashori/bmstu-testing/blob/main/backend/internal/services/implementation/client.go#L86) –æ—Ç —ç—Ç–æ–π –∂–µ –ø–æ—á—Ç—ã) => —á–∏—Ç–∞–µ–º —ç—Ç–æ –ø–∏—Å—å–º–æ –∏ –±–µ—Ä–µ–º –∏–∑ –Ω–µ–≥–æ OTP => –ø–æ–≤—Ç–æ—Ä—è–µ–º –∑–∞–ø—Ä–æ—Å —Å —ç—Ç–∏–º OTP. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –æ—Ç –ø–æ—á—Ç —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ [Vault](https://www.vaultproject.io/), —è –ø–æ–¥–Ω–∏–º–∞–ª–∞ –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ –≤ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏ —Ç–∞–∫ –∫–∞–∫ shell-—Ä–∞–Ω–Ω–µ—Ä –±—ã–ª –Ω–∞ —ç—Ç–æ–º –∂–µ –Ω–æ—É—Ç–µ, —Ç–æ –æ–Ω –º–æ–≥ –ø–æ–ª—É—á–∏—Ç—å –¥–æ –Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –µ—Å—Ç—å –≤ [–ø–∞–ø–æ—á–∫–µ](https://github.com/Dashori/bmstu-testing/tree/main/vault). –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ç–µ—Å—Ç–∞ —è –ø—Ä–æ—Å—Ç–æ –∫–ª–∞–ª–∞ –ø–∞—Ä–æ–ª–∏ –∏–∑ –≤–æ–ª—Ç–∞ –≤ [–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](https://github.com/Dashori/bmstu-testing/blob/main/.gitlab-ci.yml#L67) –∏ –¥–∞–ª—å—à–µ –≤ –∫–æ–¥–µ –∏—Ö –æ—Ç—Ç—É–¥–∞ –∏ [–ø–æ–ª—É—á–∞–ª–∞](https://github.com/Dashori/bmstu-testing/blob/lab_04/e2e/client_controller/client_otp_test.go#L37).


5. –Ø —Å–¥–∞–≤–∞–ª–∞ –µ–µ –≤–º–µ—Å—Ç–µ —Å 4 –ª–∞–±–æ–π, —Ç–∞–∫ —á—Ç–æ –µ–µ –æ—Å–æ–±–æ –Ω–µ —Å–º–æ—Ç—Ä–µ–ª–∏. –Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ jaeger, —Ç–æ—á–Ω–æ –ø–æ–º–Ω—é, —á—Ç–æ —É –º–µ–Ω—è –Ω–µ –±—ã–ª–æ –∫—Ä–∞—Å–∏–≤—ã—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ç—Ä–µ–π—Å–æ–≤ –∏ –≤—Å–µ —Å–ø–∞–Ω—ã –±—ã–ª–∏ 1 —É—Ä–æ–≤–Ω—è. –ù–æ –∏–∑ –ø—Ä–∏–∫–æ–ª—å–Ω–æ–≥–æ –∑–∞–±–∏—Ä–∞–ª–∞ –∏–Ω—Ñ—É –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ [–∫—É—Ä–ª–æ–º](https://github.com/Dashori/bmstu-testing/blob/lab_05/.gitlab-ci.yml#L53) –∏ –∫–ª–∞–ª–∞ –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.



----


##### –æ—Ñ—Ñ—Ç–æ–ø—ã


–£ –º–µ–Ω—è –µ—â–µ –±—ã–ª–∏ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –Ω–µ –≤ –≥–∏—Ç–ª–∞–±–µ, –∞ –≤ —Ç–∏–º—Å–∏—Ç–∏. –ù–æ –¥—É–º–∞—é, —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ–¥–Ω—è—Ç—å –≥–∏—Ç–ª–∞–±-—Ä–∞–Ω–Ω–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ ‚Äî –ª—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ.


–ü–æ –ø–æ–≤–æ–¥—É –æ—Ç—á–µ—Ç–æ–≤, –µ—Å—Ç—å [allure](https://github.com/ozontech/allure-go) –¥–ª—è Go –æ—Ç ozontech. –ê —É—Å–ª–æ–≤–∏–µ, —á—Ç–æ –æ—Ç—á–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –Ω–æ —è —ç—Ç–∏–º –æ—Å–æ–±–æ –Ω–µ –∑–∞–Ω–∏–º–∞–ª–∞—Å—å.


–ü–µ—Ä–≤—ã–µ –¥–≤–µ –ª–∞–±—ã —Å—Ç—Ä–∞–Ω–Ω—ã–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —è –Ω–µ —Ö–æ—Ç–µ–ª–∞ –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å —Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—ã—Ç–∞–ª–∞—Å—å —Å–¥–∞—Ç—å –∏—Ö —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —É—Å–∏–ª–∏—è–º–∏, –Ω–æ –¥–∞–ª—å—à–µ –≤—Ä–æ–¥–µ –ø–æ–ª—É—á—à–µ.